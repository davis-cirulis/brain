<html>
<head>
 <meta charset="UTF-8"> 
<title>My first Three.js app</title> 
<style> 
	body { margin: 0; } 
	canvas { width: 100%; height: 100% }</style> 
</head> 
<body> 
<script src="js/three.min.js"></script> 
<script src="js/TrackballControls.js"></script>
<script type="text/javascript" src="js/LeapCameraControls.js"></script>
<script type="text/javascript" src="js/LeapObjectControls.js"></script>
<script type="text/javascript" src="js/leap.min.js"></script>

<script> // Our Javascript will go here. 

	var objectsControls = [];
	var scene, objects = [];
	
	var renderer = new THREE.WebGLRenderer({antialias:true});
	renderer.setSize(document.body.clientWidth,document.body.clientHeight);
	document.body.appendChild(renderer.domElement);
	
	renderer.setClearColor(0xEEEEEE,1.0);
	renderer.clear();
	
	var camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1000);
	camera.position.z = 300;
	
	scene = new THREE.Scene();
	
	        // cubes
	for (var i = 0; i < 1; i ++) {
	  var geometry = new THREE.CubeGeometry(Math.random()*60, Math.random()*60, Math.random()*60);
	  var object = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color: 0xefefef}));
	  object.position.x = Math.random()* 300 - 150;
	  object.position.y = Math.random()* 300 - 150;
	  object.position.z = Math.random()* 200 - 100;

	  object.rotation.x = Math.random()*2*Math.PI;
	  object.rotation.y = Math.random()*2*Math.PI;
	  object.rotation.z = Math.random()*2*Math.PI;

	  object.receiveShadow = true;

	  // leap object controls
	  var objectControls = new THREE.LeapObjectControls(camera, object);

	  objectControls.rotateEnabled  = true;
	  objectControls.rotateSpeed    = 3;
	  objectControls.rotateHands    = 1;
	  objectControls.rotateFingers  = [4, 5];
	  
	  objectControls.scaleEnabled   = false;
	  objectControls.scaleSpeed     = 3;
	  objectControls.scaleHands     = 1;
	  objectControls.scaleFingers   = [4, 5];
	  
	  objectControls.panEnabled     = true;
	  objectControls.panSpeed       = 3;
	  objectControls.panHands       = 2;
	  objectControls.panFingers     = [6, 12];
	  objectControls.panRightHanded = false; // for left-handed person

	  scene.add(object);
	  objects.push(object);
	  objectsControls.push(objectControls);
	};
	
	Leap.loop(function(frame) {

          objectsControls[0].update(frame);

          render();
    });
	
	/*
	var controls = new THREE.TrackballControls(camera);
	controls.rotateSpeed = 10.0;
				controls.zoomSpeed = 1.2;
				controls.panSpeed = 0.8;

				controls.noZoom = false;
				controls.noPan = false;

				controls.staticMoving = true;
				controls.dynamicDampingFactor = 0.3;

				controls.keys = [ 65, 83, 68 ];

				controls.addEventListener( 'change', render );
	
	var scene = new THREE.Scene();
	var geometry = new THREE.BoxGeometry(50,50,50);
	var material = new THREE.MeshBasicMaterial({color:0xFA0808});
	var cube = new THREE.Mesh(geometry,material);
	*/
	
	
	var light = new THREE.SpotLight();
	light.position.set(170,330,-160);
	light.castShadow = true;
	
	/*
	var geom = new THREE.BoxGeometry(50,50,50);
	var mat = new THREE.MeshLambertMaterial({color:0x2F904C});
	var litCube = new THREE.Mesh(geom,mat);
	
	litCube.position.y = 50;
	litCube.castShadow = true;
	litCube.receiveShadow = true;
	
	var planeGeo = new THREE.PlaneGeometry(400,200,10,10);
	var planeMat = new THREE.MeshLambertMaterial({color:0x614503});
	var plane = new THREE.Mesh(planeGeo,planeMat);
	
	plane.rotation.x = -Math.PI/2;
	plane.position.y = -25;
	plane.receiveShadow = true;
	
	scene.add(cube);
	scene.add(light);
	scene.add(litCube);
	scene.add(plane);
	*/
	
	renderer.shadowMapEnabled = true;
	renderer.render(scene,camera);
	
	function render() {
		renderer.render(scene,camera);
	}
	
	//function animate() {
		//camera.position.x = Math.sin(t/1000)*300;
		//camera.position.y = 350;
		//camera.position.x = -250;
		//camera.position.z = 550;
		//camera.position.z = Math.cos(t/1000)*300;
	//	litCube.position.x = Math.cos(t/600)*85;
	//	litCube.position.y = 60-Math.sin(t/900)*25;
		//litCube.position.z = Math.sin(t/600)*85;
	//	litCube.rotation.x = t/500;
	//	litCube.rotation.y = t/800;
		//camera.lookAt(cube.position);
	//	render();
	//	window.requestAnimationFrame(animate);

		//controls.update();
	//};
	//animate();
</script> 
</body> 
</html>